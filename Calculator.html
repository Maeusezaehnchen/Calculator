<html>

<head>
	<title>Calculator</title>
	<meta charset="utf-8" />

	<link rel="stylesheet" href="calculator.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
</head>

<body>
	<div class="container">
		<div class="middlebox">
			<h1>Online Calculator</h1>
			<p>This calculator was designed by Sebastian Kern as a project for the Computer Science lessons in 10th
				grade.</p>
			<div class="calculator-box">
				<i class="fas fa-calculator"></i>
				<!-- Fix reload when enter is pressed -->
				<input onkeypress="onEnterKeyPress(event)" id="in" class="ibox" type="text" name="" value=""
					placeholder="Enter Your Expression here...">
				<button onclick="calculate()" class="btn" type="button" name="button">Calculate</button>
			</div>
		</div>

		<br>

		<form id="last-calc" class="last-calculations-box">
		</form>

	</div>

	<script src="calculator.js"></script>
	<script type="text/javascript">
		function onEnterKeyPress(e) {
			if (e.charCode == "13") {
				e.preventDefault();

				calculate();
			}
		}

		function calculate() {
			var inputString = document.getElementById('in').value;

			try {
				var value = evaluateMathematicalExpression(inputString);
			} catch (err) {
				alert(err);
			}

			loadNewCalculationsBox(value, inputString);

			return false;
		}
		
		function loadNewCalculationsBox(result, expression) {
			var div = document.createElement("P");

			div.style.background = "brown";
			div.style.padding = "25px";
			div.style.color = "white";
			div.style.borderRadius = "6px";
			div.style.fontWeight = "900";

			div.innerText = expression + " = " + result;

			var parent = document.getElementById("last-calc");
			parent.insertBefore(div, parent.childNodes[0]);

			for (let index = 0; index < parent.childNodes.length; index++) {
				const element = parent.childNodes[index];

				if (index != 0 && index < 5) {
					element.style.background = "#222";
					element.style.padding = "10px";
					element.style.fontWeight = "700";

					element.style.width = "300px";

					element.style.opacity = String(1.5 / index);
				}

				if (index >= 5) {
					element.style.opacity = "0";
					element.style.position = "absolute";
					element.style.top = "0";
				}


			}
		}
	</script>
</body>

</html>